@startuml
title <size:24>Container View: I Do Blueprint</size>\n<size:24>Container view showing macOS app and Supabase backend separation</size>

set separator none
top to bottom direction
skinparam ranksep 60
skinparam nodesep 30
hide stereotype

<style>
  root {
    BackgroundColor: #ffffff;
    FontColor: #444444;
  }
  // Element,Container
  .Element-RWxlbWVudCxDb250YWluZXI= {
    BackgroundColor: #438dd5;
    LineColor: #2e6295;
    LineStyle: 0;
    LineThickness: 2;
    RoundCorner: 20;
    FontColor: #ffffff;
    FontSize: 24;
    HorizontalAlignment: center;
    Shadowing: 0;
    MaximumWidth: 450;
  }
  // Element,Container,Database
  .Element-RWxlbWVudCxDb250YWluZXIsRGF0YWJhc2U= {
    BackgroundColor: #ff6b6b;
    LineColor: #b24a4a;
    LineStyle: 0;
    LineThickness: 2;
    RoundCorner: 20;
    FontColor: #ffffff;
    FontSize: 24;
    HorizontalAlignment: center;
    Shadowing: 0;
    MaximumWidth: 450;
  }
  // Element,Person
  .Element-RWxlbWVudCxQZXJzb24= {
    BackgroundColor: #08427b;
    LineColor: #052e56;
    LineStyle: 0;
    LineThickness: 2;
    FontColor: #ffffff;
    FontSize: 24;
    HorizontalAlignment: center;
    Shadowing: 0;
    MaximumWidth: 450;
  }
  // Element,Software System,External
  .Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWw= {
    BackgroundColor: #999999;
    LineColor: #6b6b6b;
    LineStyle: 0;
    LineThickness: 2;
    RoundCorner: 20;
    FontColor: #ffffff;
    FontSize: 24;
    HorizontalAlignment: center;
    Shadowing: 0;
    MaximumWidth: 450;
  }
  // Relationship
  .Relationship-UmVsYXRpb25zaGlw {
    LineThickness: 2;
    LineStyle: 10-10;
    LineColor: #444444;
    FontColor: #444444;
    FontSize: 24;
  }
  // I Do Blueprint
  .Boundary-SSBEbyBCbHVlcHJpbnQ= {
    BackgroundColor: #ffffff;
    LineColor: #0b4884;
    LineStyle: 0;
    LineThickness: 2;
    FontColor: #1168bd;
    FontSize: 24;
    HorizontalAlignment: center;
    Shadowing: 0;
  }
</style>

person "==Wedding Planning Couple\n<size:16>[Person]</size>\n\nCouple planning their wedding using I Do Blueprint" <<Element-RWxlbWVudCxQZXJzb24=>> as WeddingPlanningCouple
rectangle "==Google Sheets\n<size:16>[Software System]</size>\n\nExport budget data to spreadsheets via Google Sheets API" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWw=>> as GoogleSheets
rectangle "==Sentry\n<size:16>[Software System]</size>\n\nError tracking, crash reporting, and performance monitoring" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWw=>> as Sentry
rectangle "==macOS Keychain\n<size:16>[Software System]</size>\n\nSecure storage for auth tokens and API keys" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWw=>> as macOSKeychain

rectangle "I Do Blueprint\n<size:16>[Software System]</size>" <<Boundary-SSBEbyBCbHVlcHJpbnQ=>> {
  rectangle "==Supabase Backend\n<size:16>[Container: PostgreSQL 15, PostgREST, Realtime, GoTrue Auth]</size>\n\nPostgreSQL database with Row Level Security, Realtime, and Auth" <<Element-RWxlbWVudCxDb250YWluZXIsRGF0YWJhc2U=>> as IDoBlueprint.SupabaseBackend
  rectangle "==macOS Application\n<size:16>[Container: Swift, SwiftUI, Combine, Swift Concurrency]</size>\n\nNative Swift 5.9+ macOS app with SwiftUI, strict concurrency, and five-layer architecture" <<Element-RWxlbWVudCxDb250YWluZXI=>> as IDoBlueprint.macOSApplication
}

WeddingPlanningCouple --> IDoBlueprint.macOSApplication <<Relationship-UmVsYXRpb25zaGlw>> : "Interacts with macOS app"
IDoBlueprint.macOSApplication --> IDoBlueprint.SupabaseBackend <<Relationship-UmVsYXRpb25zaGlw>> : "Queries with NetworkRetry and RLS filters"
IDoBlueprint.macOSApplication --> GoogleSheets <<Relationship-UmVsYXRpb25zaGlw>> : "Exports budget data via Google API Client"
IDoBlueprint.macOSApplication --> Sentry <<Relationship-UmVsYXRpb25zaGlw>> : "Reports errors and crashes with context"
IDoBlueprint.macOSApplication --> macOSKeychain <<Relationship-UmVsYXRpb25zaGlw>> : "Stores/retrieves auth tokens securely"
IDoBlueprint.SupabaseBackend --> IDoBlueprint.macOSApplication <<Relationship-UmVsYXRpb25zaGlw>> : "Returns fresh data (cache miss)"

@enduml