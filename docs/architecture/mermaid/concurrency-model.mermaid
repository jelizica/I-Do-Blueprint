```mermaid
graph TB
    subgraph "Main Actor Isolation"
        View[SwiftUI Views<br/>@MainActor]
        Store[Stores<br/>@MainActor ObservableObject]
    end

    subgraph "Actor Isolation (Thread-Safe)"
        Cache[RepositoryCache<br/>actor]
        Domain1[BudgetAggregationService<br/>actor]
        Domain2[GuestAnalyticsService<br/>actor]
        Strategy1[BudgetCacheStrategy<br/>actor]
        Strategy2[GuestCacheStrategy<br/>actor]
    end

    subgraph "Sendable (Cross-Actor Safe)"
        Repo[Repositories<br/>class: Sendable]
        Models[Domain Models<br/>struct: Sendable]
    end

    subgraph "Nonisolated"
        Logger[AppLogger<br/>nonisolated methods]
        Utils[DateFormatting<br/>pure functions]
    end

    View -->|Main thread| Store
    Store -->|async call| Repo
    Repo -->|await| Cache
    Repo -->|await| Domain1
    Repo -->|await| Domain2
    Repo -->|await| Strategy1
    Repo -->|await| Strategy2
    Repo -->|Sendable transfer| Models

    Store -.->|nonisolated call| Logger
    Repo -.->|nonisolated call| Logger
    Cache -.->|nonisolated call| Logger

    Repo -.->|pure function| Utils

    Note1[All @MainActor<br/>UI updates happen<br/>on main thread]
    Note2[Actors ensure<br/>thread-safe access<br/>to mutable state]
    Note3[Sendable types<br/>safely cross<br/>actor boundaries]

    style View fill:#90EE90
    style Store fill:#87CEEB
    style Cache fill:#DDA0DD
    style Domain1 fill:#F0E68C
    style Domain2 fill:#F0E68C
    style Strategy1 fill:#FFB6C1
    style Strategy2 fill:#FFB6C1
    style Repo fill:#B0C4DE
    style Models fill:#D3D3D3
    style Logger fill:#E0E0E0
    style Utils fill:#E0E0E0
    style Note1 fill:#FFF9C4
    style Note2 fill:#FFF9C4
    style Note3 fill:#FFF9C4
```
